(function(d){var e={trackingClass:"track-changes",changedClass:"changed",events:"change blur"},b={init:function(a){this.data("trackChanges",{settings:d.extend({},e,a),original:b.value.call(this),changed:!1});b.bind.call(this);b.trigger.call(this,"init")},bind:function(){b.unbind.call(this);var a=this.data("trackChanges").settings;this.addClass(a.trackingClass).on(a.events,b.interaction)},unbind:function(){var a=this.data("trackChanges");if(a)a=a.settings,this.removeClass(a.trackingClass).off(a.events,
b.changed)},destroy:function(){b.unbind.call(this);this.removeData("trackChanges").off("trackChanges")},revert:function(){b.isChanged.call(this)&&(b.value.call(this,b.original.call(this)),b.reverted.call(this,"api"))},interaction:function(){var a=d(this),c=a.data("trackChanges").changed;b.isChanged.call(a)?c||b.changed.call(a,"interaction"):c&&b.reverted.call(a,"interaction")},changed:function(a){var c=this.data("trackChanges");c.changed=!0;b.trigger.call(this,"changed",{mode:a,original:c.original});
this.addClass(c.settings.changedClass)},reverted:function(a){var c=this.data("trackChanges");c.changed=!1;b.trigger.call(this,"reverted",{mode:a});this.removeClass(c.settings.changedClass)},isChanged:function(){return b.value.call(this)!=b.original.call(this)},trigger:function(a,b){this.trigger("trackChanges."+a,b)},value:function(a){return void 0===a?this.val():this.val(a)},original:function(a){var b=this.data("trackChanges");if(void 0!==a)b.original=a;return b.original}};d.fn.trackChanges=function(a){var c=
!1;if("object"===typeof a||!a)c=[a],a="init";else if(b[a])c=Array.prototype.slice.call(arguments,1);else return d.error("Method "+a+" does not exist on jQuery.trackChanges"),this;return this.each(function(){b[a].apply(d(this),c)})}})(jQuery);
